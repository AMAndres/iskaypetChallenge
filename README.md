# PETS microservice

## Description
This microservice is responsible for storing and managing users' pet information. It provides a RESTful API to perform CRUD operations on pet records stored in a database.

## Tech Stack
* **Lenguaje:** GO v1.23.2.
* **Api:** GO-swagger (OpenApi 2.0)
* **Base de datos:** PostgreSQL

## Software architecture
The project structure has been modeled following the hexagonal architecture pattern with the addition of vertical slicing and screaming architecture. The code follows the principles of clean architectures seeking to facilitate aspects such as maintainability, scalability and testability.

## Estructura de carpetas
- /cmd --> Entry point of the implemented versions.
- /internal --> Application code.
- /internal/commonlib --> Code that can be taken to a common library.
- /internal/configs --> Configuration and startup properties.
- /internal/src --> Logic sorted by entity/layer/use case.
- /models --> Models auto-generated by go-swagger.
- /restapi --> Api rest code autogenerated by go-swagger.
- /restapi/configure_backend.go --> Api entry point configuration.
- /scripts --> Database DDL and DML.
- /test --> Test resources.

## Base de datos
Port: 5432 | admin : admin | iskaypet : iskaypet

## API Reference

### Health
```bash
http://localhost:8082/health
```

### Swagger UI
```bash
http://localhost:8083/docs
```

### API Rest (business logic)
#### Get all items

```http
  GET /api/items
```

| Parameter | Type     | Description                |
| :-------- | :------- | :------------------------- |
| `api_key` | `string` | **Required**. Your API key |

#### Get item

```http
  GET /api/items/${id}
```

| Parameter | Type     | Description                       |
| :-------- | :------- | :-------------------------------- |
| `id`      | `string` | **Required**. Id of item to fetch |

#### add(num1, num2)

Takes two numbers and returns the sum.


## Información útil para despliegue y desarrollo

### Readme.md
README.md online editor (https://readme.so/editor)

### Swagger & GO-Swagger
- [Project repo&documentation](https://github.com/go-swagger/go-swagger)
- [Installing from source](https://goswagger.io/go-swagger/install/install-source/)
- [Generate a server from a swagger spec](https://goswagger.io/go-swagger/generate/server/)
- [Server generation and customization](https://goswagger.io/go-swagger/faq/faq_server/)
- [Serve a documentation site (SwaggerUI)](https://goswagger.io/go-swagger/usage/serve_ui/)
- [OpenApi 2.0 definition](https://swagger.io/docs/specification/v2_0/basic-structure/)
- [Swagger UI](http://localhost:5555/docs)

### Validate API definition
```bash
swagger validate ./swagger.yaml
```

### Generate server code
```bash
swagger generate server --exclude-main -A backend
```

### Publish Swagger UI
```bash
swagger serve --flavor=swagger --port 8083 --no-open swagger.yaml
```

### GO modules
Update all dependencies
```bash
go get -u ./...
```
Refresh go.mod
```bash
go mod tidy
```

### Build and run
```bash
  cd iskaypetchallenge
  go build -o ./cmd/backend-server/backend-server.exe ./cmd/backend-server
  ./cmd/backend-server/backend-server.exe
```
